{"remainingRequest":"C:\\Users\\axelc\\Desktop\\CinemaManager\\CinemaManagerUserVue\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\axelc\\Desktop\\CinemaManager\\CinemaManagerUserVue\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\Users\\axelc\\Desktop\\CinemaManager\\CinemaManagerUserVue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\axelc\\Desktop\\CinemaManager\\CinemaManagerUserVue\\src\\views\\Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\axelc\\Desktop\\CinemaManager\\CinemaManagerUserVue\\src\\views\\Login.vue","mtime":1712413084500},{"path":"C:\\Users\\axelc\\Desktop\\CinemaManager\\CinemaManagerUserVue\\babel.config.js","mtime":1651665518000},{"path":"C:\\Users\\axelc\\Desktop\\CinemaManager\\CinemaManagerUserVue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1688268005356},{"path":"C:\\Users\\axelc\\Desktop\\CinemaManager\\CinemaManagerUserVue\\node_modules\\babel-loader\\lib\\index.js","mtime":1688268007045},{"path":"C:\\Users\\axelc\\Desktop\\CinemaManager\\CinemaManagerUserVue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1688268005356},{"path":"C:\\Users\\axelc\\Desktop\\CinemaManager\\CinemaManagerUserVue\\node_modules\\vue-loader\\lib\\index.js","mtime":1688268007736}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiTG9naW4iLAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICAvLyDnmbvlvZXooajljZXmlbDmja7lr7nosaEKICAgICAgbG9naW5Gb3JtOiB7CiAgICAgICAgdXNlck5hbWU6ICIiLAogICAgICAgIHBhc3N3b3JkOiAiIgogICAgICB9LAogICAgICAvLyDnmbvlvZXooajljZXpqozor4Hop4TliJkKICAgICAgbG9naW5Gb3JtUnVsZXM6IHsKICAgICAgICAvLyDpqozor4HnlKjmiLflkI3moLzlvI8KICAgICAgICB1c2VyTmFtZTogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgbWVzc2FnZTogIuivt+i+k+WFpeeUqOaIt+WQjeensCIsCiAgICAgICAgICB0cmlnZ2VyOiAiYmx1ciIKICAgICAgICB9LCB7CiAgICAgICAgICBtaW46IDIsCiAgICAgICAgICBtYXg6IDIwLAogICAgICAgICAgbWVzc2FnZTogIueUqOaIt+WQjeensOmVv+W6puWcqDLliLAyMOS4quWtl+espuS5i+mXtCIsCiAgICAgICAgICB0cmlnZ2VyOiAiYmx1ciIKICAgICAgICB9XSwKICAgICAgICAvLyDpqozor4Hlr4bnoIHmoLzlvI8KICAgICAgICBwYXNzd29yZDogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgbWVzc2FnZTogIuivt+i+k+WFpeWvhueggSIsCiAgICAgICAgICB0cmlnZ2VyOiAiYmx1ciIKICAgICAgICB9LCB7CiAgICAgICAgICBtaW46IDYsCiAgICAgICAgICBtYXg6IDE2LAogICAgICAgICAgbWVzc2FnZTogIueZu+W9leWvhueggemVv+W6puWcqDbliLAxNuS4quWtl+espuS5i+mXtCIsCiAgICAgICAgICB0cmlnZ2VyOiAiYmx1ciIKICAgICAgICB9XQogICAgICB9LAogICAgICBzZXNzaW9uSWQ6IDAKICAgIH07CiAgfSwKICBjcmVhdGVkKCkgewogICAgdGhpcy5zZXNzaW9uSWQgPSB3aW5kb3cuc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgic2Vzc2lvbklkIik7CiAgICBjb25zb2xlLmxvZygidGhpcyBzZXNzaW9uSWQgaXMgOiAiICsgdGhpcy5zZXNzaW9uSWQpOwogICAgd2luZG93LnNlc3Npb25TdG9yYWdlLnNldEl0ZW0oInNlc3Npb25JZCIsIDApOwogIH0sCiAgbWV0aG9kczogewogICAgc3VjY2VzcyhwYXJhbXMpIHsKICAgICAgdGhpcy5sb2dpbigpOwogICAgfSwKICAgIGxvZ2luKCkgewogICAgICB0aGlzLiRyZWZzLmxvZ2luRm9ybVJlZi52YWxpZGF0ZShhc3luYyB2YWxpZCA9PiB7CiAgICAgICAgaWYgKCF2YWxpZCkgcmV0dXJuOwogICAgICAgIGF4aW9zLmRlZmF1bHRzLmhlYWRlcnMucG9zdFsiQ29udGVudC1UeXBlIl0gPSAiYXBwbGljYXRpb24vanNvbiI7CiAgICAgICAgY29uc3QgewogICAgICAgICAgZGF0YTogcmVzCiAgICAgICAgfSA9IGF3YWl0IGF4aW9zLnBvc3QoInN5c1VzZXIvbG9naW4iLCBKU09OLnN0cmluZ2lmeSh0aGlzLmxvZ2luRm9ybSkpOwogICAgICAgIGlmIChyZXMuY29kZSAhPT0gMjAwKSByZXR1cm4gdGhpcy4kbWVzc2FnZS5lcnJvcihyZXMubXNnKTsKICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoewogICAgICAgICAgbWVzc2FnZTogIueZu+W9leaIkOWKnyIsCiAgICAgICAgICBkdXJhdGlvbjogMTAwMAogICAgICAgIH0pOwogICAgICAgIGNvbnNvbGUubG9nKHJlcy5kYXRhKTsKICAgICAgICAvLyDkv53lrZh0b2tlbgogICAgICAgIHdpbmRvdy5zZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCJ0b2tlbiIsIHJlcy5kYXRhLnRva2VuKTsKICAgICAgICByZXMuZGF0YS5zeXNVc2VyLnN5c1JvbGUgPSBudWxsOwogICAgICAgIHdpbmRvdy5zZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCJsb2dpblVzZXIiLCBKU09OLnN0cmluZ2lmeShyZXMuZGF0YS5zeXNVc2VyKSk7CiAgICAgICAgaWYgKHRoaXMuc2Vzc2lvbklkICE9PSAwICYmIHRoaXMuc2Vzc2lvbklkICE9PSAiMCIgJiYgdGhpcy5zZXNzaW9uSWQgIT09IG51bGwpIHsKICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCIvY2hvb3NlU2VhdC8iICsgdGhpcy5zZXNzaW9uSWQpOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICAvLyDlr7zoiKrot7PovazliLDpppbpobUKICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgiL3dlbGNvbWUiKTsKICAgICAgfSk7CiAgICB9LAogICAgcmVnaXN0ZXJBY2NvdW50KCkgewogICAgICB0aGlzLiRyb3V0ZXIucHVzaCgiL3JlZ2lzdGVyIik7CiAgICB9CiAgfQp9Ow=="},{"version":3,"names":["name","data","loginForm","userName","password","loginFormRules","required","message","trigger","min","max","sessionId","created","window","sessionStorage","getItem","console","log","setItem","methods","success","params","login","$refs","loginFormRef","validate","valid","axios","defaults","headers","post","res","JSON","stringify","code","$message","error","msg","duration","token","sysUser","sysRole","$router","push","registerAccount"],"sources":["src/views/Login.vue"],"sourcesContent":["<template>\n    <div class=\"login_container\">\n        <div class=\"login_box\">\n            <div class=\"title_box\">\n                <p>\n                    <i class=\"el-icon-orange\" style=\"font-size: 36px\"></i>\n                    欢迎来到南国影城！\n                </p>\n            </div>\n            <!-- 登录表单区域 -->\n            <el-form\n                class=\"login_form\"\n                :model=\"loginForm\"\n                :rules=\"loginFormRules\"\n                ref=\"loginFormRef\"\n            >\n                <!-- 用户名 -->\n                <el-form-item prop=\"userName\">\n                    <el-row>\n                        <el-col :span=\"2\">\n                            <i\n                                class=\"el-icon-user\"\n                                style=\"font-size: 28px; color: grey\"\n                            ></i>\n                        </el-col>\n                        <el-col :span=\"22\">\n                            <el-input\n                                v-model=\"loginForm.userName\"\n                                placeholder=\"请输入用户名\"\n                                clearable\n                            ></el-input>\n                        </el-col>\n                    </el-row>\n                </el-form-item>\n                <!-- 密码 -->\n                <el-form-item prop=\"password\">\n                    <el-row>\n                        <el-col :span=\"2\">\n                            <i\n                                class=\"el-icon-edit\"\n                                style=\"font-size: 28px; color: grey\"\n                            ></i>\n                        </el-col>\n                        <el-col :span=\"22\">\n                            <el-input\n                                v-model=\"loginForm.password\"\n                                type=\"password\"\n                                placeholder=\"请输入密码\"\n                                show-password\n                            ></el-input>\n                        </el-col>\n                    </el-row>\n                </el-form-item>\n                <div class=\"tips\">\n                    <el-radio >\n                        <el-text> 我已阅读并同意《用户服务协议》《隐私政策》</el-text><br>\n                    </el-radio><br>\n                    <span>客服电话：1010-5335</span>\n                </div>\n                \n                <!-- 按扭区域 -->\n                <el-form-item class=\"btns\">\n                    <el-button\n                        :round=\"true\"\n                        icon=\"el-icon-success\"\n                        type=\"primary\"\n                        @click=\"login\"\n                        style=\"font-size: 22px; width: 150px;\"\n                    >\n                        登录</el-button\n                    >\n                    <el-button\n                        style=\"font-size: 22px\"\n                        :round=\"true\"\n                        type=\"info\"\n                        @click=\"registerAccount\"\n                    >\n                        注册新用户</el-button\n                    >\n                </el-form-item>\n            </el-form>\n        </div>\n    </div>\n</template>\n\n<script>\nexport default {\n    name: \"Login\",\n    data() {\n        return {\n            // 登录表单数据对象\n            loginForm: {\n                userName: \"\",\n                password: \"\",\n            },\n            // 登录表单验证规则\n            loginFormRules: {\n                // 验证用户名格式\n                userName: [\n                    {\n                        required: true,\n                        message: \"请输入用户名称\",\n                        trigger: \"blur\",\n                    },\n                    {\n                        min: 2,\n                        max: 20,\n                        message: \"用户名称长度在2到20个字符之间\",\n                        trigger: \"blur\",\n                    },\n                ],\n                // 验证密码格式\n                password: [\n                    { required: true, message: \"请输入密码\", trigger: \"blur\" },\n                    {\n                        min: 6,\n                        max: 16,\n                        message: \"登录密码长度在6到16个字符之间\",\n                        trigger: \"blur\",\n                    },\n                ],\n            },\n            sessionId: 0,\n        };\n    },\n    created() {\n        this.sessionId = window.sessionStorage.getItem(\"sessionId\");\n        console.log(\"this sessionId is : \" + this.sessionId);\n        window.sessionStorage.setItem(\"sessionId\", 0);\n    },\n    methods: {\n        success(params) {\n            this.login();\n        },\n        login() {\n            this.$refs.loginFormRef.validate(async (valid) => {\n                if (!valid) return;\n                axios.defaults.headers.post[\"Content-Type\"] =\n                    \"application/json\";\n                const { data: res } = await axios.post(\n                    \"sysUser/login\",\n                    JSON.stringify(this.loginForm)\n                );\n                if (res.code !== 200) return this.$message.error(res.msg);\n\n                this.$message.success({ message: \"登录成功\", duration: 1000 });\n                console.log(res.data);\n                // 保存token\n                window.sessionStorage.setItem(\"token\", res.data.token);\n                res.data.sysUser.sysRole = null;\n                window.sessionStorage.setItem(\n                    \"loginUser\",\n                    JSON.stringify(res.data.sysUser)\n                );\n                if (\n                    this.sessionId !== 0 &&\n                    this.sessionId !== \"0\" &&\n                    this.sessionId !== null\n                ) {\n                    this.$router.push(\"/chooseSeat/\" + this.sessionId);\n                    return;\n                }\n                // 导航跳转到首页\n                this.$router.push(\"/welcome\");\n            });\n        },\n        registerAccount() {\n            this.$router.push(\"/register\");\n        },\n    },\n};\n</script>\n\n<style scoped>\n.login_container {\n    background: url(\"../assets/login-background.jpg\");\n    background-size: cover;\n    height: 100%;\n}\n\n.login_box {\n    width: 450px;\n    height: 300px;\n    background-color: #fff;\n    border-radius: 3px;\n    position: absolute;\n    left: 50%;\n    top: 50%;\n    transform: translate(-50%, -50%);\n    border: 1px solid grey;\n}\n\n.avatar_box {\n    height: 130px;\n    width: 130px;\n    border: 1px solid #eee;\n    border-radius: 50%;\n    padding: 10px;\n    box-shadow: 0 0 10px #ddd;\n    position: absolute;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    background-color: #fff;\n}\n\n.avatar_box > img {\n    width: 100%;\n    height: 100%;\n    border-radius: 50%;\n    background-color: #eee;\n}\n\n.title_box {\n    text-align: center;\n    font-size: 180%;\n    font-family:'sans-serif'\n}\n\n.login_form {\n    position: absolute;\n    bottom: 0;\n    width: 100%;\n    padding: 0 20px;\n    box-sizing: border-box;\n}\n\n.btns {\n    display: flex;\n    justify-content: center;\n}\n\ndiv .tips {\n\t/* Font & Text */\n\tfont-family: \"Helvetica Neue\", Helvetica, Arial, sans-serif;\n\tfont-size: 13.6px;\n\tfont-style: normal;\n\tfont-variant: normal;\n\tfont-weight: 400;\n\tletter-spacing: normal;\n\tline-height: 13.6px;\n\ttext-decoration: none solid rgba(0, 0, 0, 0.5);\n\ttext-align: left;\n\ttext-indent: 0px;\n\ttext-transform: none;\n\tvertical-align: baseline;\n\twhite-space: normal;\n\tword-spacing: 0px;\n\n\n\n\n\t/* Positioning */\n\tposition: static;\n\ttop: auto;\n\tbottom: auto;\n\tright: auto;\n\tleft: auto;\n\tfloat: none;\n\tdisplay: block;\n\tclear: none;\n\tz-index: auto;\n}\n</style>\n"],"mappings":";AAsFA;EACAA,IAAA;EACAC,KAAA;IACA;MACA;MACAC,SAAA;QACAC,QAAA;QACAC,QAAA;MACA;MACA;MACAC,cAAA;QACA;QACAF,QAAA,GACA;UACAG,QAAA;UACAC,OAAA;UACAC,OAAA;QACA,GACA;UACAC,GAAA;UACAC,GAAA;UACAH,OAAA;UACAC,OAAA;QACA,EACA;QACA;QACAJ,QAAA,GACA;UAAAE,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA,GACA;UACAC,GAAA;UACAC,GAAA;UACAH,OAAA;UACAC,OAAA;QACA;MAEA;MACAG,SAAA;IACA;EACA;EACAC,QAAA;IACA,KAAAD,SAAA,GAAAE,MAAA,CAAAC,cAAA,CAAAC,OAAA;IACAC,OAAA,CAAAC,GAAA,+BAAAN,SAAA;IACAE,MAAA,CAAAC,cAAA,CAAAI,OAAA;EACA;EACAC,OAAA;IACAC,QAAAC,MAAA;MACA,KAAAC,KAAA;IACA;IACAA,MAAA;MACA,KAAAC,KAAA,CAAAC,YAAA,CAAAC,QAAA,OAAAC,KAAA;QACA,KAAAA,KAAA;QACAC,KAAA,CAAAC,QAAA,CAAAC,OAAA,CAAAC,IAAA,mBACA;QACA;UAAA7B,IAAA,EAAA8B;QAAA,UAAAJ,KAAA,CAAAG,IAAA,CACA,iBACAE,IAAA,CAAAC,SAAA,MAAA/B,SAAA,CACA;QACA,IAAA6B,GAAA,CAAAG,IAAA,sBAAAC,QAAA,CAAAC,KAAA,CAAAL,GAAA,CAAAM,GAAA;QAEA,KAAAF,QAAA,CAAAf,OAAA;UAAAb,OAAA;UAAA+B,QAAA;QAAA;QACAtB,OAAA,CAAAC,GAAA,CAAAc,GAAA,CAAA9B,IAAA;QACA;QACAY,MAAA,CAAAC,cAAA,CAAAI,OAAA,UAAAa,GAAA,CAAA9B,IAAA,CAAAsC,KAAA;QACAR,GAAA,CAAA9B,IAAA,CAAAuC,OAAA,CAAAC,OAAA;QACA5B,MAAA,CAAAC,cAAA,CAAAI,OAAA,CACA,aACAc,IAAA,CAAAC,SAAA,CAAAF,GAAA,CAAA9B,IAAA,CAAAuC,OAAA,CACA;QACA,IACA,KAAA7B,SAAA,UACA,KAAAA,SAAA,YACA,KAAAA,SAAA,WACA;UACA,KAAA+B,OAAA,CAAAC,IAAA,uBAAAhC,SAAA;UACA;QACA;QACA;QACA,KAAA+B,OAAA,CAAAC,IAAA;MACA;IACA;IACAC,gBAAA;MACA,KAAAF,OAAA,CAAAC,IAAA;IACA;EACA;AACA"}]}