{"remainingRequest":"C:\\Users\\axelc\\Desktop\\CinemaManager\\CinemaManagerUserVue\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\axelc\\Desktop\\CinemaManager\\CinemaManagerUserVue\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\Users\\axelc\\Desktop\\CinemaManager\\CinemaManagerUserVue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\axelc\\Desktop\\CinemaManager\\CinemaManagerUserVue\\src\\views\\user\\UserInfo.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\axelc\\Desktop\\CinemaManager\\CinemaManagerUserVue\\src\\views\\user\\UserInfo.vue","mtime":1711786884745},{"path":"C:\\Users\\axelc\\Desktop\\CinemaManager\\CinemaManagerUserVue\\babel.config.js","mtime":1651665518000},{"path":"C:\\Users\\axelc\\Desktop\\CinemaManager\\CinemaManagerUserVue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1688268005356},{"path":"C:\\Users\\axelc\\Desktop\\CinemaManager\\CinemaManagerUserVue\\node_modules\\babel-loader\\lib\\index.js","mtime":1688268007045},{"path":"C:\\Users\\axelc\\Desktop\\CinemaManager\\CinemaManagerUserVue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1688268005356},{"path":"C:\\Users\\axelc\\Desktop\\CinemaManager\\CinemaManagerUserVue\\node_modules\\vue-loader\\lib\\index.js","mtime":1688268007736}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZXJyb3IuY2F1c2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5wdXNoLmpzIjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJVc2VySW5mbyIsCiAgZGF0YSgpIHsKICAgIGxldCBjaGVja0VtYWlsID0gKHJ1bGUsIHZhbHVlLCBjYikgPT4gewogICAgICBjb25zdCByZWdFbWFpbCA9IC9eKFthLXpBLVowLTlfLV0pK0AoW2EtekEtWjAtOV8tXSkrKFwuW2EtekEtWjAtOV8tXSkrLzsKICAgICAgaWYgKHJlZ0VtYWlsLnRlc3QodmFsdWUpKSB7CiAgICAgICAgcmV0dXJuIGNiKCk7CiAgICAgIH0KICAgICAgY2IobmV3IEVycm9yKCfor7fovpPlhaXlkIjms5XnmoTpgq7nrrEnKSk7CiAgICB9OwogICAgbGV0IGNoZWNrTW9iaWxlID0gKHJ1bGUsIHZhbHVlLCBjYikgPT4gewogICAgICBjb25zdCByZWdNb2JpbGUgPSAvXigwfDg2fDE3OTUxKT8oMTNbMC05XXwxNVswMTIzNDU2Nzg5XXwxN1s2NzhdfDE4WzAtOV18MTRbNTddKVswLTldezh9JC87CiAgICAgIGlmIChyZWdNb2JpbGUudGVzdCh2YWx1ZSkpIHsKICAgICAgICByZXR1cm4gY2IoKTsKICAgICAgfQogICAgICBjYihuZXcgRXJyb3IoJ+ivt+i+k+WFpeWQiOazleeahOaJi+acuuWPt+eggScpKTsKICAgIH07CiAgICByZXR1cm4gewogICAgICBwaWNEaWFsb2c6IGZhbHNlLAogICAgICBsb2dpblVzZXI6IHsKICAgICAgICB1c2VySWRlbnRpdHk6IDAKICAgICAgfSwKICAgICAgcGljczogW10sCiAgICAgIHBpY3R1cmVMaXN0OiBbXSwKICAgICAgcGljU3JjOiAiIiwKICAgICAgZGVsZXRlUGljTGlzdDogW10sCiAgICAgIC8v6aqM6K+B6KGo5Y2V6KeE5YiZ5a+56LGhCiAgICAgIGxvZ2luVXNlclJ1bGVzOiB7CiAgICAgICAgdXNlck5hbWU6IFt7CiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgIG1lc3NhZ2U6ICfor7fovpPlhaXnlKjmiLflkI0nLAogICAgICAgICAgdHJpZ2dlcjogJ2JsdXInCiAgICAgICAgfV0sCiAgICAgICAgZW1haWw6IFt7CiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgIG1lc3NhZ2U6ICfor7fovpPlhaXnlLXlrZDpgq7nrrEnLAogICAgICAgICAgdHJpZ2dlcjogJ2JsdXInCiAgICAgICAgfSwgewogICAgICAgICAgdmFsaWRhdG9yOiBjaGVja0VtYWlsLAogICAgICAgICAgdHJpZ2dlcjogJ2JsdXInCiAgICAgICAgfV0sCiAgICAgICAgcGhvbmVOdW1iZXI6IFt7CiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgIG1lc3NhZ2U6ICfor7fovpPlhaXmiYvmnLrlj7fnoIEnLAogICAgICAgICAgdHJpZ2dlcjogJ2JsdXInCiAgICAgICAgfSwgewogICAgICAgICAgdmFsaWRhdG9yOiBjaGVja01vYmlsZSwKICAgICAgICAgIHRyaWdnZXI6ICdibHVyJwogICAgICAgIH1dLAogICAgICAgIHNleDogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgbWVzc2FnZTogJ+ivt+mAieaLqeaAp+WIqycsCiAgICAgICAgICB0cmlnZ2VyOiAnY2hhbmdlJwogICAgICAgIH1dLAogICAgICAgIGJpcnRoZGF5OiBbewogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICBtZXNzYWdlOiAn6K+36YCJ5oup55Sf5pelJywKICAgICAgICAgIHRyaWdnZXI6ICdjaGFuZ2UnCiAgICAgICAgfV0KICAgICAgfQogICAgfTsKICB9LAogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmdldFVzZXIoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGFzeW5jIGdldFVzZXIoKSB7CiAgICAgIGNvbnN0IHsKICAgICAgICBkYXRhOiByZXMKICAgICAgfSA9IGF3YWl0IGF4aW9zLmdldCgnc3lzVXNlci8nICsgSlNPTi5wYXJzZSh3aW5kb3cuc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgnbG9naW5Vc2VyJykpLnVzZXJJZCk7CiAgICAgIHRoaXMubG9naW5Vc2VyID0gcmVzLmRhdGE7CiAgICAgIGlmIChKU09OLnBhcnNlKHRoaXMubG9naW5Vc2VyLnVzZXJQaWN0dXJlKS5sZW5ndGggPiAwKSB0aGlzLnBpY3MucHVzaCh7CiAgICAgICAgbmFtZTogJ3BpY3R1cmUnLAogICAgICAgIHVybDogSlNPTi5wYXJzZSh0aGlzLmxvZ2luVXNlci51c2VyUGljdHVyZSlbMF0KICAgICAgfSk7ZWxzZSB0aGlzLnBpY3MgPSBbXTsKICAgICAgdGhpcy5sb2dpblVzZXIuaWRlbnRpdHkgPSByZXMuZGF0YS51c2VySWRlbnRpdHk7CiAgICB9LAogICAgYXN5bmMgaGFuZGxlU3VjY2VzcyhyZXNwb25zZSwgZmlsZSwgZmlsZUxpc3QpIHsKICAgICAgdGhpcy5waWNzID0gZmlsZUxpc3Q7CiAgICAgIGNvbnNvbGUubG9nKHRoaXMucGljcyk7CiAgICAgIGF3YWl0IHRoaXMuc3VibWl0RmlsZSgpOwogICAgICB0aGlzLnBpY1NyYyA9IHRoaXMucGljdHVyZUxpc3RbMF07CiAgICB9LAogICAgaGFuZGxlRXJyb3IoZXJyKSB7CiAgICAgIGNvbnNvbGUubG9nKGVycik7CiAgICB9LAogICAgaGFuZGxlQ2hhbmdlKGZpbGUsIGZpbGVsaXN0KSB7CiAgICAgIHRoaXMucGljcyA9IGZpbGVsaXN0LnNsaWNlKDApOwogICAgICBjb25zb2xlLmxvZygxMTEpOwogICAgICBjb25zb2xlLmxvZyh0aGlzLnBpY3MpOwogICAgICB0aGlzLnBpY0RpYWxvZyA9IHRydWU7CiAgICB9LAogICAgaGFuZGxlUmVtb3ZlKGZpbGUpIHsKICAgICAgY29uc3QgZmlsZVBhdGggPSBmaWxlLnVybDsKICAgICAgY29uc29sZS5sb2coZmlsZVBhdGgpOwogICAgICBjb25zdCBpZHggPSB0aGlzLnBpY3MuZmluZEluZGV4KHggPT4geC51cmwgPT09IGZpbGVQYXRoKTsKICAgICAgaWYgKGZpbGUuc3RhdHVzID09PSAnc3VjY2VzcycpIHsKICAgICAgICB0aGlzLmRlbGV0ZVBpY0xpc3QucHVzaChmaWxlLnVybCk7CiAgICAgIH0KICAgICAgdGhpcy5waWNzLnNwbGljZShpZHgsIDEpOwogICAgfSwKICAgIGlkZW50aWZ5KHZhbHVlKSB7CiAgICAgIGNvbnNvbGUubG9nKHZhbHVlLCB0aGlzLmxvZ2luVXNlci51c2VySWRlbnRpdHkpOwogICAgICAvLyDmoLnmja7nlKjmiLfpgInmi6nnmoTouqvku73ov5vooYznm7jlupTnmoTlpITnkIYKICAgICAgaWYgKHRoaXMubG9naW5Vc2VyLnVzZXJJZGVudGl0eSA9PT0gMSkgewogICAgICAgIC8vIOaJp+ihjOWtpueUn+iupOivgeeahOaTjeS9nO+8jOavlOWmguW8ueWHuuS4iuS8oOWtpueUn+ivgeeahOWwj+eql+WPowogICAgICAgIC8vIOS9oOmcgOimgeagueaNruWunumZheaDheWGtea3u+WKoOWtpueUn+iupOivgeeahOmAu+i+kQogICAgICAgIC8vIOavlOWmgiB0aGlzLnVwbG9hZFN0dWRlbnRJRENhcmQoKQogICAgICAgIGNvbnN0IGNvbmZpcm1SZXN1bHQgPSB0aGlzLiRjb25maXJtKCfnoa7lrprov5vooYzlrabnlJ/orqTor4HlkJfvvJ8nLCAn5a2m55Sf6K6k6K+BJywgewogICAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICfnoa7orqQnLAogICAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogJ+WPlua2iCcsCiAgICAgICAgICB0eXBlOiAnd2FybmluZycKICAgICAgICB9KS50aGVuKCgpID0+IHsKICAgICAgICAgIC8vIOiuvue9rueUqOaIt+i6q+S7veS4uuWtpueUnwogICAgICAgICAgdGhpcy5sb2dpblVzZXIudXNlcklkZW50aXR5ID0gMTsKICAgICAgICB9KS5jYXRjaCgoKSA9PiB7CiAgICAgICAgICAvLyDnlKjmiLfngrnlh7vlj5bmtojvvIzorr7nva7nlKjmiLfouqvku73kuLrmma7pgJrnlKjmiLcKICAgICAgICAgIHRoaXMubG9naW5Vc2VyLnVzZXJJZGVudGl0eSA9IDA7CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSBpZiAodGhpcy5sb2dpblVzZXIudXNlcklkZW50aXR5ID09PSAyKSB7CiAgICAgICAgLy8g5omn6KGM6ZW/6ICF6K6k6K+B55qE5pON5L2c77yM5qC55o2u55So5oi355qE55Sf5pel6L+b6KGM5Yik5patCiAgICAgICAgaWYgKCF0aGlzLmxvZ2luVXNlci5iaXJ0aGRheSkgewogICAgICAgICAgLy8g5aaC5p6c55So5oi355qE55Sf5pel5rKh5pyJ5aGr5YaZ77yM5YiZ5by55Ye65o+Q56S66K6p55So5oi35aGr5YaZCiAgICAgICAgICB0aGlzLiRtZXNzYWdlLndhcm5pbmcoJ+ivt+Whq+WGmeaCqOeahOeUn+aXpeS/oeaBrycpOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgLy8g6K6h566X55So5oi355qE5bm06b6ECiAgICAgICAgY29uc3QgYmlydGhkYXkgPSBuZXcgRGF0ZSh0aGlzLmxvZ2luVXNlci5iaXJ0aGRheSk7CiAgICAgICAgY29uc3QgdG9kYXkgPSBuZXcgRGF0ZSgpOwogICAgICAgIGNvbnN0IGFnZSA9IHRvZGF5LmdldEZ1bGxZZWFyKCkgLSBiaXJ0aGRheS5nZXRGdWxsWWVhcigpOwoKICAgICAgICAvLyDliKTmlq3nlKjmiLfmmK/lkKbovr7liLDkuobplb/ogIXorqTor4HnmoTmnaHku7bvvIg2MOWygeS7peS4iu+8iQogICAgICAgIGlmIChhZ2UgPj0gNjApIHsKICAgICAgICAgIC8vIOeUqOaIt+mAmui/h+mVv+iAheiupOivge+8jOWwhueUqOaIt+i6q+S7veiuvue9ruS4uumVv+iAhQogICAgICAgICAgdGhpcy5sb2dpblVzZXIudXNlcklkZW50aXR5ID0gMjsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgLy8g55So5oi35pyq6L6+5Yiw6ZW/6ICF6K6k6K+B5p2h5Lu277yM57uZ5Ye65o+Q56S6CiAgICAgICAgICB0aGlzLiRtZXNzYWdlLndhcm5pbmcoJ+aCqOacqua7oei2s+mVv+iAheiupOivgeadoeS7tu+8iDYw5bKB5Lul5LiK77yJJyk7CiAgICAgICAgICB0aGlzLmxvZ2luVXNlci51c2VySWRlbnRpdHkgPSAwOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmxvZ2luVXNlci51c2VySWRlbnRpdHkgPSAwOwogICAgICB9CiAgICB9LAogICAgYXN5bmMgZWRpdFVzZXIoKSB7CiAgICAgIGF3YWl0IHRoaXMuc3VibWl0RmlsZSgpOwogICAgICB0aGlzLmxvZ2luVXNlci51c2VyUGljdHVyZSA9IEpTT04uc3RyaW5naWZ5KHRoaXMucGljdHVyZUxpc3QpOwogICAgICBjb25zb2xlLmxvZyh0aGlzLmxvZ2luVXNlcik7CiAgICAgIC8v5o+Q5Lqk5L+h5oGv5Yiw5ZCO56uv5L+d5a2YCiAgICAgIGNvbnN0IF90aGlzID0gdGhpczsKICAgICAgbGV0IHN1Y2Nlc3MgPSB0cnVlOwogICAgICBheGlvcy5kZWZhdWx0cy5oZWFkZXJzLnB1dFsnQ29udGVudC1UeXBlJ10gPSAnYXBwbGljYXRpb24vanNvbic7CiAgICAgIGF3YWl0IGF4aW9zLnB1dCgnc3lzVXNlcicsIEpTT04uc3RyaW5naWZ5KHRoaXMubG9naW5Vc2VyKSkudGhlbihyZXNwID0+IHsKICAgICAgICBpZiAocmVzcC5kYXRhLmNvZGUgIT09IDIwMCkgewogICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign5L+u5pS555So5oi35L+h5oGv5aSx6LSl77yBJyk7CiAgICAgICAgICBzdWNjZXNzID0gZmFsc2U7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgaWYgKCFzdWNjZXNzKSByZXR1cm47CiAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygn5L+u5pS555So5oi35L+h5oGv5oiQ5YqfIScpOwogICAgICAvL+a4heepuuWbvueJh+WIl+ihqOeXhemHjeaWsOiOt+WPlueUqOaIt+S/oeaBrwogICAgICB0aGlzLnBpY3MgPSBbXTsKICAgICAgdGhpcy5waWN0dXJlTGlzdCA9IFtdOwogICAgICBhd2FpdCB0aGlzLmdldFVzZXIoKTsKICAgICAgdGhpcy5waWNEaWFsb2cgPSBmYWxzZTsKICAgIH0sCiAgICBhc3luYyBzdWJtaXRGaWxlKCkgewogICAgICBjb25zdCBfdGhpcyA9IHRoaXM7CiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5waWNzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgbGV0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7CiAgICAgICAgaWYgKHRoaXMucGljc1tpXS5zdGF0dXMgPT09ICdzdWNjZXNzJykgewogICAgICAgICAgbGV0IHMgPSB0aGlzLnBpY3NbaV0udXJsOwogICAgICAgICAgdGhpcy5waWN0dXJlTGlzdC5wdXNoKHMuc3Vic3RyaW5nKHMuaW5kZXhPZignL2ltYWdlcycpKSk7CiAgICAgICAgICBjb250aW51ZTsKICAgICAgICB9CiAgICAgICAgbGV0IGZpbGUgPSB0aGlzLnBpY3NbaV0ucmF3OwogICAgICAgIGZvcm1EYXRhLmFwcGVuZCgnZmlsZScsIGZpbGUpOwogICAgICAgIGF3YWl0IGF4aW9zLnBvc3QoJ3VwbG9hZC91c2VyJywgZm9ybURhdGEpLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpOwogICAgICAgICAgX3RoaXMucGljdHVyZUxpc3QucHVzaChyZXNwb25zZS5kYXRhLmRhdGEpOwogICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgaGFuZGxlRXhjZWVkKCkgewogICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCLnlKjmiLflpLTlg4/mnIDlpJrkuIrkvKDkuIDlvKDvvIEiKTsKICAgIH0KICB9Cn07"},{"version":3,"names":["name","data","checkEmail","rule","value","cb","regEmail","test","Error","checkMobile","regMobile","picDialog","loginUser","userIdentity","pics","pictureList","picSrc","deletePicList","loginUserRules","userName","required","message","trigger","email","validator","phoneNumber","sex","birthday","created","getUser","methods","res","axios","get","JSON","parse","window","sessionStorage","getItem","userId","userPicture","length","push","url","identity","handleSuccess","response","file","fileList","console","log","submitFile","handleError","err","handleChange","filelist","slice","handleRemove","filePath","idx","findIndex","x","status","splice","identify","confirmResult","$confirm","confirmButtonText","cancelButtonText","type","then","catch","$message","warning","Date","today","age","getFullYear","editUser","stringify","_this","success","defaults","headers","put","resp","code","error","i","formData","FormData","s","substring","indexOf","raw","append","post","handleExceed"],"sources":["src/views/user/UserInfo.vue"],"sourcesContent":["<template>\n<div class=\"user-info-container\">\n  <div style=\"width: 30%\">\n    <h1>用户头像</h1>\n    <el-upload action=\"\"\n               list-type=\"picture-card\"\n               :auto-upload=\"false\"\n               :limit=\"1\"\n               :file-list=\"pics\"\n               :on-change=\"handleChange\"\n               :on-success=\"handleSuccess\"\n               :on-error=\"handleError\"\n               :on-exceed=\"handleExceed\"\n               ref=\"pictureRef\"\n               :http-request=\"submitFile\">\n      <i slot=\"default\" class=\"el-icon-plus\"></i>\n      <div slot=\"file\" slot-scope=\"{file}\">\n        <img class=\"el-upload-list__item-thumbnail\" :src=\"(picDialog? '' : global.base)+file.url\" alt=\"\">\n        <span class=\"el-upload-list__item-actions\">\n          <span class=\"el-upload-list__item-delete\" @click=\"handleRemove(file)\">\n            <i class=\"el-icon-delete\"></i>\n          </span>\n        </span>\n      </div>\n    </el-upload>\n  </div>\n  <div style=\"width: 70%\">\n    <el-form :model=\"loginUser\"  :rules=\"loginUserRules\" ref=\"editFormRef\" label-width=\"80px\">\n      <el-form-item label=\"用户名\" prop=\"userName\">\n        <el-input v-model=\"loginUser.userName\"></el-input>\n      </el-form-item>\n      <el-form-item label=\"电子邮箱\" prop=\"email\">\n        <el-input v-model=\"loginUser.email\"></el-input>\n      </el-form-item>\n      <el-form-item label=\"手机号码\" prop=\"phoneNumber\">\n        <el-input v-model=\"loginUser.phoneNumber\"></el-input>\n      </el-form-item>\n      <el-form-item label=\"性别\" prop=\"sex\">\n          <el-radio v-model=\"loginUser.sex\" :label=\"true\">男</el-radio>\n          <el-radio v-model=\"loginUser.sex\" :label=\"false\">女</el-radio>\n      </el-form-item>\n      <el-form-item label=\"生日\" prop=\"birthday\">\n        <el-date-picker\n            v-model=\"loginUser.birthday\"\n            value-format=\"yyyy-MM-dd\"\n            type=\"date\"\n            placeholder=\"选择日期\"></el-date-picker>\n      </el-form-item>\n      <el-form-item label=\"身份认证\" prop=\"identity\">\n        <el-radio-group v-model=\"loginUser.userIdentity\" @change=\"identify\">\n          <el-radio-button :label=\"0\">普通用户</el-radio-button>\n          <el-radio-button :label=\"1\">学生认证</el-radio-button>\n          <el-radio-button :label=\"2\">长者认证</el-radio-button>\n        </el-radio-group>\n      </el-form-item>\n      <el-form-item label=\"个性签名\" prop=\"autograph\">\n        <el-input v-model=\"loginUser.autograph\"></el-input>\n      </el-form-item>\n        <el-button type=\"primary\" @click=\"editUser\" style=\"font-size: 20px;\"> 保存</el-button>\n    </el-form>\n  </div>\n</div>\n</template>\n\n<script>\nexport default {\n  name: \"UserInfo\",\n  data() {\n    let checkEmail = (rule, value, cb) => {\n      const regEmail = /^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(\\.[a-zA-Z0-9_-])+/\n      if (regEmail.test(value)){\n        return cb()\n      }\n      cb(new Error('请输入合法的邮箱'))\n    }\n    let checkMobile = (rule, value, cb) => {\n      const regMobile = /^(0|86|17951)?(13[0-9]|15[0123456789]|17[678]|18[0-9]|14[57])[0-9]{8}$/\n      if (regMobile.test(value)){\n        return cb()\n      }\n      cb(new Error('请输入合法的手机号码'))\n    }\n    return {\n      picDialog:false,\n      loginUser:{\n        userIdentity: 0\n      },\n      pics:[],\n      pictureList:[],\n      picSrc:\"\",\n      deletePicList:[],\n\n      //验证表单规则对象\n      loginUserRules: {\n        userName: [\n          { required: true, message: '请输入用户名', trigger: 'blur' }\n        ],\n        email: [\n          { required: true, message: '请输入电子邮箱', trigger: 'blur' },\n          { validator: checkEmail, trigger: 'blur'}\n        ],\n        phoneNumber: [\n          { required: true, message: '请输入手机号码', trigger: 'blur' },\n          { validator: checkMobile, trigger: 'blur'}\n        ],\n        sex: [\n          { required: true, message: '请选择性别', trigger: 'change' }\n        ],\n        birthday: [\n          { required: true, message: '请选择生日', trigger: 'change' }\n        ]\n      }\n    }\n  },\n  created() {\n    this.getUser()\n  },\n  methods:{\n    async getUser(){\n      const { data : res } = await axios.get('sysUser/'+JSON.parse(window.sessionStorage.getItem('loginUser')).userId)\n      this.loginUser = res.data\n      if(JSON.parse(this.loginUser.userPicture).length>0)\n        this.pics.push({name:'picture',url:JSON.parse(this.loginUser.userPicture)[0]})\n      else this.pics = [];\n      this.loginUser.identity = res.data.userIdentity\n    },\n    async handleSuccess(response, file, fileList){\n      this.pics = fileList\n      console.log(this.pics)\n      await this.submitFile()\n      this.picSrc = this.pictureList[0]\n    },\n    handleError(err){\n      console.log(err)\n    },\n    handleChange(file, filelist){\n      this.pics = filelist.slice(0)\n      console.log(111)\n      console.log(this.pics)\n      this.picDialog =true\n    },\n    handleRemove(file) {\n      const filePath = file.url\n      console.log(filePath)\n      const idx = this.pics.findIndex(x => x.url === filePath)\n      if(file.status === 'success'){\n        this.deletePicList.push(file.url)\n      }\n      this.pics.splice(idx, 1)\n    },\n    identify(value){\n      console.log(value, this.loginUser.userIdentity);\n        // 根据用户选择的身份进行相应的处理\n      if (this.loginUser.userIdentity === 1) {\n        // 执行学生认证的操作，比如弹出上传学生证的小窗口\n        // 你需要根据实际情况添加学生认证的逻辑\n        // 比如 this.uploadStudentIDCard()\n        const confirmResult = this.$confirm('确定进行学生认证吗？', '学生认证', {\n          confirmButtonText: '确认',\n          cancelButtonText: '取消',\n          type: 'warning'\n        }).then(()=>{\n          // 设置用户身份为学生\n          this.loginUser.userIdentity = 1\n        }).catch(() => {\n          // 用户点击取消，设置用户身份为普通用户\n          this.loginUser.userIdentity = 0\n        })\n      } else if (this.loginUser.userIdentity === 2) {\n        // 执行长者认证的操作，根据用户的生日进行判断\n        if (!this.loginUser.birthday) {\n          // 如果用户的生日没有填写，则弹出提示让用户填写\n          this.$message.warning('请填写您的生日信息')\n          return\n        }\n\n        // 计算用户的年龄\n        const birthday = new Date(this.loginUser.birthday)\n        const today = new Date()\n        const age = today.getFullYear() - birthday.getFullYear()\n\n        // 判断用户是否达到了长者认证的条件（60岁以上）\n        if (age >= 60) {\n          // 用户通过长者认证，将用户身份设置为长者\n          this.loginUser.userIdentity = 2\n        } else {\n          // 用户未达到长者认证条件，给出提示\n          this.$message.warning('您未满足长者认证条件（60岁以上）')\n          this.loginUser.userIdentity = 0\n          return\n        }\n      }else{\n        this.loginUser.userIdentity = 0\n      }\n    },\n     async editUser(){\n       await this.submitFile()\n       this.loginUser.userPicture = JSON.stringify(this.pictureList)\n\n        console.log(this.loginUser);\n       //提交信息到后端保存\n       const _this = this\n       let success = true\n       axios.defaults.headers.put['Content-Type'] = 'application/json'\n       await axios.put('sysUser',JSON.stringify(this.loginUser)).then(resp=>{\n         if (resp.data.code !== 200){\n           this.$message.error('修改用户信息失败！')\n           success = false\n         }\n       })\n       if(!success) return\n       this.$message.success('修改用户信息成功!')\n       //清空图片列表病重新获取用户信息\n       this.pics = []\n       this.pictureList = []\n       await this.getUser()\n       this.picDialog = false\n    },\n    async submitFile(){\n      const _this = this\n      for (let i = 0; i < this.pics.length; i++){\n        let formData = new FormData()\n        if (this.pics[i].status === 'success') {\n          let s = this.pics[i].url\n          this.pictureList.push(s.substring(s.indexOf('/images')))\n          continue\n        }\n        let file = this.pics[i].raw\n        formData.append('file', file)\n        await axios.post('upload/user', formData).then(response =>{\n          console.log(response)\n          _this.pictureList.push(response.data.data)\n        })\n      }\n    },\n    handleExceed(){\n      this.$message.error(\"用户头像最多上传一张！\")\n    },\n  }\n}\n</script>\n\n<style scoped>\n.user-info-container{\n  display: flex;\n}\n</style>\n"],"mappings":"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"}]}