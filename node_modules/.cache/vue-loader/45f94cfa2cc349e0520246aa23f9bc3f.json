{"remainingRequest":"C:\\Users\\axelc\\Desktop\\CinemaManager\\CinemaManagerUserVue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\axelc\\Desktop\\CinemaManager\\CinemaManagerUserVue\\src\\views\\user\\UserInfo.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\axelc\\Desktop\\CinemaManager\\CinemaManagerUserVue\\src\\views\\user\\UserInfo.vue","mtime":1712479145523},{"path":"C:\\Users\\axelc\\Desktop\\CinemaManager\\CinemaManagerUserVue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1688268005356},{"path":"C:\\Users\\axelc\\Desktop\\CinemaManager\\CinemaManagerUserVue\\node_modules\\babel-loader\\lib\\index.js","mtime":1688268007045},{"path":"C:\\Users\\axelc\\Desktop\\CinemaManager\\CinemaManagerUserVue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1688268005356},{"path":"C:\\Users\\axelc\\Desktop\\CinemaManager\\CinemaManagerUserVue\\node_modules\\vue-loader\\lib\\index.js","mtime":1688268007736}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiVXNlckluZm8iLAogIGRhdGEoKSB7CiAgICBsZXQgY2hlY2tFbWFpbCA9IChydWxlLCB2YWx1ZSwgY2IpID0+IHsKICAgICAgY29uc3QgcmVnRW1haWwgPSAvXihbYS16QS1aMC05Xy1dKStAKFthLXpBLVowLTlfLV0pKyhcLlthLXpBLVowLTlfLV0pKy8KICAgICAgaWYgKHJlZ0VtYWlsLnRlc3QodmFsdWUpKXsKICAgICAgICByZXR1cm4gY2IoKQogICAgICB9CiAgICAgIGNiKG5ldyBFcnJvcign6K+36L6T5YWl5ZCI5rOV55qE6YKu566xJykpCiAgICB9CiAgICBsZXQgY2hlY2tNb2JpbGUgPSAocnVsZSwgdmFsdWUsIGNiKSA9PiB7CiAgICAgIGNvbnN0IHJlZ01vYmlsZSA9IC9eKDB8ODZ8MTc5NTEpPygxM1swLTldfDE1WzAxMjM0NTY3ODldfDE3WzY3OF18MThbMC05XXwxNFs1N10pWzAtOV17OH0kLwogICAgICBpZiAocmVnTW9iaWxlLnRlc3QodmFsdWUpKXsKICAgICAgICByZXR1cm4gY2IoKQogICAgICB9CiAgICAgIGNiKG5ldyBFcnJvcign6K+36L6T5YWl5ZCI5rOV55qE5omL5py65Y+356CBJykpCiAgICB9CiAgICByZXR1cm4gewogICAgICBwaWNEaWFsb2c6ZmFsc2UsCiAgICAgIGxvZ2luVXNlcjp7CiAgICAgICAgdXNlcklkZW50aXR5OiAwCiAgICAgIH0sCiAgICAgIHBpY3M6W10sCiAgICAgIHBpY3R1cmVMaXN0OltdLAogICAgICBwaWNTcmM6IiIsCiAgICAgIGRlbGV0ZVBpY0xpc3Q6W10sCgogICAgICAvL+mqjOivgeihqOWNleinhOWImeWvueixoQogICAgICBsb2dpblVzZXJSdWxlczogewogICAgICAgIHVzZXJOYW1lOiBbCiAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn6K+36L6T5YWl55So5oi35ZCNJywgdHJpZ2dlcjogJ2JsdXInIH0KICAgICAgICBdLAogICAgICAgIGVtYWlsOiBbCiAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn6K+36L6T5YWl55S15a2Q6YKu566xJywgdHJpZ2dlcjogJ2JsdXInIH0sCiAgICAgICAgICB7IHZhbGlkYXRvcjogY2hlY2tFbWFpbCwgdHJpZ2dlcjogJ2JsdXInfQogICAgICAgIF0sCiAgICAgICAgcGhvbmVOdW1iZXI6IFsKICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfor7fovpPlhaXmiYvmnLrlj7fnoIEnLCB0cmlnZ2VyOiAnYmx1cicgfSwKICAgICAgICAgIHsgdmFsaWRhdG9yOiBjaGVja01vYmlsZSwgdHJpZ2dlcjogJ2JsdXInfQogICAgICAgIF0sCiAgICAgICAgc2V4OiBbCiAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn6K+36YCJ5oup5oCn5YirJywgdHJpZ2dlcjogJ2NoYW5nZScgfQogICAgICAgIF0sCiAgICAgICAgYmlydGhkYXk6IFsKICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfor7fpgInmi6nnlJ/ml6UnLCB0cmlnZ2VyOiAnY2hhbmdlJyB9CiAgICAgICAgXQogICAgICB9CiAgICB9CiAgfSwKICBjcmVhdGVkKCkgewogICAgdGhpcy5nZXRVc2VyKCkKICB9LAogIG1ldGhvZHM6ewogICAgYXN5bmMgZ2V0VXNlcigpewogICAgICBjb25zdCB7IGRhdGEgOiByZXMgfSA9IGF3YWl0IGF4aW9zLmdldCgnc3lzVXNlci8nK0pTT04ucGFyc2Uod2luZG93LnNlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ2xvZ2luVXNlcicpKS51c2VySWQpCiAgICAgIHRoaXMubG9naW5Vc2VyID0gcmVzLmRhdGEKICAgICAgaWYoSlNPTi5wYXJzZSh0aGlzLmxvZ2luVXNlci51c2VyUGljdHVyZSkubGVuZ3RoPjApCiAgICAgICAgdGhpcy5waWNzLnB1c2goe25hbWU6J3BpY3R1cmUnLHVybDpKU09OLnBhcnNlKHRoaXMubG9naW5Vc2VyLnVzZXJQaWN0dXJlKVswXX0pCiAgICAgIGVsc2UgdGhpcy5waWNzID0gW107CiAgICAgIHRoaXMubG9naW5Vc2VyLmlkZW50aXR5ID0gcmVzLmRhdGEudXNlcklkZW50aXR5CiAgICB9LAogICAgYXN5bmMgaGFuZGxlU3VjY2VzcyhyZXNwb25zZSwgZmlsZSwgZmlsZUxpc3QpewogICAgICB0aGlzLnBpY3MgPSBmaWxlTGlzdAogICAgICBjb25zb2xlLmxvZyh0aGlzLnBpY3MpCiAgICAgIGF3YWl0IHRoaXMuc3VibWl0RmlsZSgpCiAgICAgIHRoaXMucGljU3JjID0gdGhpcy5waWN0dXJlTGlzdFswXQogICAgfSwKICAgIGhhbmRsZUVycm9yKGVycil7CiAgICAgIGNvbnNvbGUubG9nKGVycikKICAgIH0sCiAgICBoYW5kbGVDaGFuZ2UoZmlsZSwgZmlsZWxpc3QpewogICAgICB0aGlzLnBpY3MgPSBmaWxlbGlzdC5zbGljZSgwKQogICAgICBjb25zb2xlLmxvZygxMTEpCiAgICAgIGNvbnNvbGUubG9nKHRoaXMucGljcykKICAgICAgdGhpcy5waWNEaWFsb2cgPXRydWUKICAgIH0sCiAgICBoYW5kbGVSZW1vdmUoZmlsZSkgewogICAgICBjb25zdCBmaWxlUGF0aCA9IGZpbGUudXJsCiAgICAgIGNvbnNvbGUubG9nKGZpbGVQYXRoKQogICAgICBjb25zdCBpZHggPSB0aGlzLnBpY3MuZmluZEluZGV4KHggPT4geC51cmwgPT09IGZpbGVQYXRoKQogICAgICBpZihmaWxlLnN0YXR1cyA9PT0gJ3N1Y2Nlc3MnKXsKICAgICAgICB0aGlzLmRlbGV0ZVBpY0xpc3QucHVzaChmaWxlLnVybCkKICAgICAgfQogICAgICB0aGlzLnBpY3Muc3BsaWNlKGlkeCwgMSkKICAgIH0sCiAgICBpZGVudGlmeSh2YWx1ZSl7CiAgICAgIGNvbnNvbGUubG9nKHZhbHVlLCB0aGlzLmxvZ2luVXNlci51c2VySWRlbnRpdHkpOwogICAgICAgIC8vIOagueaNrueUqOaIt+mAieaLqeeahOi6q+S7vei/m+ihjOebuOW6lOeahOWkhOeQhgogICAgICBpZiAodGhpcy5sb2dpblVzZXIudXNlcklkZW50aXR5ID09PSAxKSB7CiAgICAgICAgLy8g5omn6KGM5a2m55Sf6K6k6K+B55qE5pON5L2c77yM5q+U5aaC5by55Ye65LiK5Lyg5a2m55Sf6K+B55qE5bCP56qX5Y+jCgogICAgICAgIGNvbnN0IGNvbmZpcm1SZXN1bHQgPSB0aGlzLiRjb25maXJtKCfnoa7lrprov5vooYzlrabnlJ/orqTor4HlkJfvvJ8nLCAn5a2m55Sf6K6k6K+BJywgewogICAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICfnoa7orqQnLAogICAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogJ+WPlua2iCcsCiAgICAgICAgICB0eXBlOiAnd2FybmluZycKICAgICAgICB9KS50aGVuKCgpPT57CiAgICAgICAgICAvLyDorr7nva7nlKjmiLfouqvku73kuLrlrabnlJ8KICAgICAgICAgIHRoaXMubG9naW5Vc2VyLnVzZXJJZGVudGl0eSA9IDEKICAgICAgICB9KS5jYXRjaCgoKSA9PiB7CiAgICAgICAgICAvLyDnlKjmiLfngrnlh7vlj5bmtojvvIzorr7nva7nlKjmiLfouqvku73kuLrmma7pgJrnlKjmiLcKICAgICAgICAgIHRoaXMubG9naW5Vc2VyLnVzZXJJZGVudGl0eSA9IDAKICAgICAgICB9KQogICAgICB9IGVsc2UgaWYgKHRoaXMubG9naW5Vc2VyLnVzZXJJZGVudGl0eSA9PT0gMikgewogICAgICAgIC8vIOaJp+ihjOmVv+iAheiupOivgeeahOaTjeS9nO+8jOagueaNrueUqOaIt+eahOeUn+aXpei/m+ihjOWIpOaWrQogICAgICAgIGlmICghdGhpcy5sb2dpblVzZXIuYmlydGhkYXkpIHsKICAgICAgICAgIC8vIOWmguaenOeUqOaIt+eahOeUn+aXpeayoeacieWhq+WGme+8jOWImeW8ueWHuuaPkOekuuiuqeeUqOaIt+Whq+WGmQogICAgICAgICAgdGhpcy4kbWVzc2FnZS53YXJuaW5nKCfor7floavlhpnmgqjnmoTnlJ/ml6Xkv6Hmga8nKQogICAgICAgICAgcmV0dXJuCiAgICAgICAgfQoKICAgICAgICAvLyDorqHnrpfnlKjmiLfnmoTlubTpvoQKICAgICAgICBjb25zdCBiaXJ0aGRheSA9IG5ldyBEYXRlKHRoaXMubG9naW5Vc2VyLmJpcnRoZGF5KQogICAgICAgIGNvbnN0IHRvZGF5ID0gbmV3IERhdGUoKQogICAgICAgIGNvbnN0IGFnZSA9IHRvZGF5LmdldEZ1bGxZZWFyKCkgLSBiaXJ0aGRheS5nZXRGdWxsWWVhcigpCgogICAgICAgIC8vIOWIpOaWreeUqOaIt+aYr+WQpui+vuWIsOS6humVv+iAheiupOivgeeahOadoeS7tu+8iDYw5bKB5Lul5LiK77yJCiAgICAgICAgaWYgKGFnZSA+PSA2MCkgewogICAgICAgICAgLy8g55So5oi36YCa6L+H6ZW/6ICF6K6k6K+B77yM5bCG55So5oi36Lqr5Lu96K6+572u5Li66ZW/6ICFCiAgICAgICAgICB0aGlzLmxvZ2luVXNlci51c2VySWRlbnRpdHkgPSAyCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIC8vIOeUqOaIt+acqui+vuWIsOmVv+iAheiupOivgeadoeS7tu+8jOe7meWHuuaPkOekugogICAgICAgICAgdGhpcy4kbWVzc2FnZS53YXJuaW5nKCfmgqjmnKrmu6HotrPplb/ogIXorqTor4HmnaHku7bvvIg2MOWygeS7peS4iu+8iScpCiAgICAgICAgICB0aGlzLmxvZ2luVXNlci51c2VySWRlbnRpdHkgPSAwCiAgICAgICAgICByZXR1cm4KICAgICAgICB9CiAgICAgIH1lbHNlewogICAgICAgIHRoaXMubG9naW5Vc2VyLnVzZXJJZGVudGl0eSA9IDAKICAgICAgfQogICAgfSwKICAgICBhc3luYyBlZGl0VXNlcigpewogICAgICAgYXdhaXQgdGhpcy5zdWJtaXRGaWxlKCkKICAgICAgIHRoaXMubG9naW5Vc2VyLnVzZXJQaWN0dXJlID0gSlNPTi5zdHJpbmdpZnkodGhpcy5waWN0dXJlTGlzdCkKCiAgICAgICAgY29uc29sZS5sb2codGhpcy5sb2dpblVzZXIpOwogICAgICAgLy/mj5DkuqTkv6Hmga/liLDlkI7nq6/kv53lrZgKICAgICAgIGNvbnN0IF90aGlzID0gdGhpcwogICAgICAgbGV0IHN1Y2Nlc3MgPSB0cnVlCiAgICAgICBheGlvcy5kZWZhdWx0cy5oZWFkZXJzLnB1dFsnQ29udGVudC1UeXBlJ10gPSAnYXBwbGljYXRpb24vanNvbicKICAgICAgIGF3YWl0IGF4aW9zLnB1dCgnc3lzVXNlcicsSlNPTi5zdHJpbmdpZnkodGhpcy5sb2dpblVzZXIpKS50aGVuKHJlc3A9PnsKICAgICAgICAgaWYgKHJlc3AuZGF0YS5jb2RlICE9PSAyMDApewogICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+S/ruaUueeUqOaIt+S/oeaBr+Wksei0pe+8gScpCiAgICAgICAgICAgc3VjY2VzcyA9IGZhbHNlCiAgICAgICAgIH0KICAgICAgIH0pCiAgICAgICBpZighc3VjY2VzcykgcmV0dXJuCiAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoJ+S/ruaUueeUqOaIt+S/oeaBr+aIkOWKnyEnKQogICAgICAgLy/muIXnqbrlm77niYfliJfooajnl4Xph43mlrDojrflj5bnlKjmiLfkv6Hmga8KICAgICAgIHRoaXMucGljcyA9IFtdCiAgICAgICB0aGlzLnBpY3R1cmVMaXN0ID0gW10KICAgICAgIGF3YWl0IHRoaXMuZ2V0VXNlcigpCiAgICAgICB0aGlzLnBpY0RpYWxvZyA9IGZhbHNlCiAgICB9LAogICAgYXN5bmMgc3VibWl0RmlsZSgpewogICAgICBjb25zdCBfdGhpcyA9IHRoaXMKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnBpY3MubGVuZ3RoOyBpKyspewogICAgICAgIGxldCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpCiAgICAgICAgaWYgKHRoaXMucGljc1tpXS5zdGF0dXMgPT09ICdzdWNjZXNzJykgewogICAgICAgICAgbGV0IHMgPSB0aGlzLnBpY3NbaV0udXJsCiAgICAgICAgICB0aGlzLnBpY3R1cmVMaXN0LnB1c2gocy5zdWJzdHJpbmcocy5pbmRleE9mKCcvaW1hZ2VzJykpKQogICAgICAgICAgY29udGludWUKICAgICAgICB9CiAgICAgICAgbGV0IGZpbGUgPSB0aGlzLnBpY3NbaV0ucmF3CiAgICAgICAgZm9ybURhdGEuYXBwZW5kKCdmaWxlJywgZmlsZSkKICAgICAgICBhd2FpdCBheGlvcy5wb3N0KCd1cGxvYWQvdXNlcicsIGZvcm1EYXRhKS50aGVuKHJlc3BvbnNlID0+ewogICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpCiAgICAgICAgICBfdGhpcy5waWN0dXJlTGlzdC5wdXNoKHJlc3BvbnNlLmRhdGEuZGF0YSkKICAgICAgICB9KQogICAgICB9CiAgICB9LAogICAgaGFuZGxlRXhjZWVkKCl7CiAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoIueUqOaIt+WktOWDj+acgOWkmuS4iuS8oOS4gOW8oO+8gSIpCiAgICB9LAogIH0KfQo="},{"version":3,"sources":["UserInfo.vue"],"names":[],"mappings":";AAiEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"UserInfo.vue","sourceRoot":"src/views/user","sourcesContent":["<template>\n<div class=\"user-info-container\">\n  <div style=\"width: 30%\">\n    <h1>用户头像</h1>\n    <el-upload action=\"\"\n               list-type=\"picture-card\"\n               :auto-upload=\"false\"\n               :limit=\"1\"\n               :file-list=\"pics\"\n               :on-change=\"handleChange\"\n               :on-success=\"handleSuccess\"\n               :on-error=\"handleError\"\n               :on-exceed=\"handleExceed\"\n               ref=\"pictureRef\"\n               :http-request=\"submitFile\">\n      <i slot=\"default\" class=\"el-icon-plus\"></i>\n      <div slot=\"file\" slot-scope=\"{file}\">\n        <img class=\"el-upload-list__item-thumbnail\" :src=\"(picDialog? '' : global.base)+file.url\" alt=\"\">\n        <span class=\"el-upload-list__item-actions\">\n          <span class=\"el-upload-list__item-delete\" @click=\"handleRemove(file)\">\n            <i class=\"el-icon-delete\"></i>\n          </span>\n        </span>\n      </div>\n    </el-upload>\n  </div>\n  <div style=\"width: 70%\">\n    <el-form :model=\"loginUser\"  :rules=\"loginUserRules\" ref=\"editFormRef\" label-width=\"80px\">\n      <el-form-item label=\"用户名\" prop=\"userName\">\n        <el-input v-model=\"loginUser.userName\"></el-input>\n      </el-form-item>\n      <el-form-item label=\"电子邮箱\" prop=\"email\">\n        <el-input v-model=\"loginUser.email\"></el-input>\n      </el-form-item>\n      <el-form-item label=\"手机号码\" prop=\"phoneNumber\">\n        <el-input v-model=\"loginUser.phoneNumber\"></el-input>\n      </el-form-item>\n      <el-form-item label=\"性别\" prop=\"sex\">\n          <el-radio v-model=\"loginUser.sex\" :label=\"true\">男</el-radio>\n          <el-radio v-model=\"loginUser.sex\" :label=\"false\">女</el-radio>\n      </el-form-item>\n      <el-form-item label=\"生日\" prop=\"birthday\">\n        <el-date-picker\n            v-model=\"loginUser.birthday\"\n            value-format=\"yyyy-MM-dd\"\n            type=\"date\"\n            placeholder=\"选择日期\"></el-date-picker>\n      </el-form-item>\n      <el-form-item label=\"身份认证\" prop=\"identity\">\n        <el-radio-group v-model=\"loginUser.userIdentity\" @change=\"identify\">\n          <el-radio-button :label=\"0\">普通用户</el-radio-button>\n          <el-radio-button :label=\"1\">学生认证</el-radio-button>\n          <el-radio-button :label=\"2\">长者认证</el-radio-button>\n        </el-radio-group>\n      </el-form-item>\n      <el-form-item label=\"个性签名\" prop=\"autograph\">\n        <el-input v-model=\"loginUser.autograph\"></el-input>\n      </el-form-item>\n        <el-button type=\"primary\" @click=\"editUser\" style=\"font-size: 20px;\"> 保存</el-button>\n    </el-form>\n  </div>\n</div>\n</template>\n\n<script>\nexport default {\n  name: \"UserInfo\",\n  data() {\n    let checkEmail = (rule, value, cb) => {\n      const regEmail = /^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(\\.[a-zA-Z0-9_-])+/\n      if (regEmail.test(value)){\n        return cb()\n      }\n      cb(new Error('请输入合法的邮箱'))\n    }\n    let checkMobile = (rule, value, cb) => {\n      const regMobile = /^(0|86|17951)?(13[0-9]|15[0123456789]|17[678]|18[0-9]|14[57])[0-9]{8}$/\n      if (regMobile.test(value)){\n        return cb()\n      }\n      cb(new Error('请输入合法的手机号码'))\n    }\n    return {\n      picDialog:false,\n      loginUser:{\n        userIdentity: 0\n      },\n      pics:[],\n      pictureList:[],\n      picSrc:\"\",\n      deletePicList:[],\n\n      //验证表单规则对象\n      loginUserRules: {\n        userName: [\n          { required: true, message: '请输入用户名', trigger: 'blur' }\n        ],\n        email: [\n          { required: true, message: '请输入电子邮箱', trigger: 'blur' },\n          { validator: checkEmail, trigger: 'blur'}\n        ],\n        phoneNumber: [\n          { required: true, message: '请输入手机号码', trigger: 'blur' },\n          { validator: checkMobile, trigger: 'blur'}\n        ],\n        sex: [\n          { required: true, message: '请选择性别', trigger: 'change' }\n        ],\n        birthday: [\n          { required: true, message: '请选择生日', trigger: 'change' }\n        ]\n      }\n    }\n  },\n  created() {\n    this.getUser()\n  },\n  methods:{\n    async getUser(){\n      const { data : res } = await axios.get('sysUser/'+JSON.parse(window.sessionStorage.getItem('loginUser')).userId)\n      this.loginUser = res.data\n      if(JSON.parse(this.loginUser.userPicture).length>0)\n        this.pics.push({name:'picture',url:JSON.parse(this.loginUser.userPicture)[0]})\n      else this.pics = [];\n      this.loginUser.identity = res.data.userIdentity\n    },\n    async handleSuccess(response, file, fileList){\n      this.pics = fileList\n      console.log(this.pics)\n      await this.submitFile()\n      this.picSrc = this.pictureList[0]\n    },\n    handleError(err){\n      console.log(err)\n    },\n    handleChange(file, filelist){\n      this.pics = filelist.slice(0)\n      console.log(111)\n      console.log(this.pics)\n      this.picDialog =true\n    },\n    handleRemove(file) {\n      const filePath = file.url\n      console.log(filePath)\n      const idx = this.pics.findIndex(x => x.url === filePath)\n      if(file.status === 'success'){\n        this.deletePicList.push(file.url)\n      }\n      this.pics.splice(idx, 1)\n    },\n    identify(value){\n      console.log(value, this.loginUser.userIdentity);\n        // 根据用户选择的身份进行相应的处理\n      if (this.loginUser.userIdentity === 1) {\n        // 执行学生认证的操作，比如弹出上传学生证的小窗口\n\n        const confirmResult = this.$confirm('确定进行学生认证吗？', '学生认证', {\n          confirmButtonText: '确认',\n          cancelButtonText: '取消',\n          type: 'warning'\n        }).then(()=>{\n          // 设置用户身份为学生\n          this.loginUser.userIdentity = 1\n        }).catch(() => {\n          // 用户点击取消，设置用户身份为普通用户\n          this.loginUser.userIdentity = 0\n        })\n      } else if (this.loginUser.userIdentity === 2) {\n        // 执行长者认证的操作，根据用户的生日进行判断\n        if (!this.loginUser.birthday) {\n          // 如果用户的生日没有填写，则弹出提示让用户填写\n          this.$message.warning('请填写您的生日信息')\n          return\n        }\n\n        // 计算用户的年龄\n        const birthday = new Date(this.loginUser.birthday)\n        const today = new Date()\n        const age = today.getFullYear() - birthday.getFullYear()\n\n        // 判断用户是否达到了长者认证的条件（60岁以上）\n        if (age >= 60) {\n          // 用户通过长者认证，将用户身份设置为长者\n          this.loginUser.userIdentity = 2\n        } else {\n          // 用户未达到长者认证条件，给出提示\n          this.$message.warning('您未满足长者认证条件（60岁以上）')\n          this.loginUser.userIdentity = 0\n          return\n        }\n      }else{\n        this.loginUser.userIdentity = 0\n      }\n    },\n     async editUser(){\n       await this.submitFile()\n       this.loginUser.userPicture = JSON.stringify(this.pictureList)\n\n        console.log(this.loginUser);\n       //提交信息到后端保存\n       const _this = this\n       let success = true\n       axios.defaults.headers.put['Content-Type'] = 'application/json'\n       await axios.put('sysUser',JSON.stringify(this.loginUser)).then(resp=>{\n         if (resp.data.code !== 200){\n           this.$message.error('修改用户信息失败！')\n           success = false\n         }\n       })\n       if(!success) return\n       this.$message.success('修改用户信息成功!')\n       //清空图片列表病重新获取用户信息\n       this.pics = []\n       this.pictureList = []\n       await this.getUser()\n       this.picDialog = false\n    },\n    async submitFile(){\n      const _this = this\n      for (let i = 0; i < this.pics.length; i++){\n        let formData = new FormData()\n        if (this.pics[i].status === 'success') {\n          let s = this.pics[i].url\n          this.pictureList.push(s.substring(s.indexOf('/images')))\n          continue\n        }\n        let file = this.pics[i].raw\n        formData.append('file', file)\n        await axios.post('upload/user', formData).then(response =>{\n          console.log(response)\n          _this.pictureList.push(response.data.data)\n        })\n      }\n    },\n    handleExceed(){\n      this.$message.error(\"用户头像最多上传一张！\")\n    },\n  }\n}\n</script>\n\n<style scoped>\n.user-info-container{\n  display: flex;\n}\n</style>\n"]}]}