{"remainingRequest":"D:\\Work\\WorkSpace\\GitWorkSpace\\TenShop\\resource\\CinemaManager\\src\\CinemaManagerUserVue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Work\\WorkSpace\\GitWorkSpace\\TenShop\\resource\\CinemaManager\\src\\CinemaManagerUserVue\\src\\views\\movie\\MovieOngoing.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Work\\WorkSpace\\GitWorkSpace\\TenShop\\resource\\CinemaManager\\src\\CinemaManagerUserVue\\src\\views\\movie\\MovieOngoing.vue","mtime":1651665518000},{"path":"D:\\Work\\WorkSpace\\GitWorkSpace\\TenShop\\resource\\CinemaManager\\src\\CinemaManagerUserVue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1688268005356},{"path":"D:\\Work\\WorkSpace\\GitWorkSpace\\TenShop\\resource\\CinemaManager\\src\\CinemaManagerUserVue\\node_modules\\babel-loader\\lib\\index.js","mtime":1688268007045},{"path":"D:\\Work\\WorkSpace\\GitWorkSpace\\TenShop\\resource\\CinemaManager\\src\\CinemaManagerUserVue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1688268005356},{"path":"D:\\Work\\WorkSpace\\GitWorkSpace\\TenShop\\resource\\CinemaManager\\src\\CinemaManagerUserVue\\node_modules\\vue-loader\\lib\\index.js","mtime":1688268007736}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBtb3ZpZUl0ZW0gZnJvbSAnLi4vLi4vY29tcG9uZW50cy9tb3ZpZS9tb3ZpZS1pdGVtJwppbXBvcnQgbW9tZW50IGZyb20gJ21vbWVudCcKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJNb3ZpZU9uZ29pbmciLAogIGNvbXBvbmVudHM6IHsKICAgIG1vdmllSXRlbQogIH0sCiAgcHJvcHM6IHsKICAgIG1vdmllQ2F0ZWdvcnlJZDogTnVtYmVyLAogICAgb3JkZXJCeUNvbHVtbjogU3RyaW5nCiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdG90YWw6IDAsCiAgICAgIHBhZ2VTaXplOiAzMCwKICAgICAgcGFnZU51bTogMSwKICAgICAgc3RhcnREYXRlOiBtb21lbnQoKS5zdWJ0cmFjdCgzMCwgImRheXMiKS5mb3JtYXQoIllZWVktTU0tREQiKSwKICAgICAgZW5kRGF0ZTogbW9tZW50KCkuZm9ybWF0KCdZWVlZLU1NLUREJyksCiAgICAgIG1vdmllTGlzdDogW10sCiAgICAgIHNvcnJ5OiBmYWxzZQogICAgfQogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGxpc3RlbkNoYW5nZSgpIHsKICAgICAgY29uc3Qge21vdmllQ2F0ZWdvcnlJZCwgb3JkZXJCeUNvbHVtbn0gPSB0aGlzCiAgICAgIHJldHVybiB7bW92aWVDYXRlZ29yeUlkLCBvcmRlckJ5Q29sdW1ufQogICAgfQogIH0sCiAgY3JlYXRlZCgpIHsKICAgIHRoaXMuZ2V0TW92aWVMaXN0KCkKICB9LAogIHdhdGNoOiB7CiAgICBsaXN0ZW5DaGFuZ2UoKSB7CiAgICAgIHRoaXMuZ2V0TW92aWVMaXN0KCkKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIGFzeW5jIGdldE1vdmllTGlzdCgpewogICAgICBsZXQgcXVlcnlJbmZvID0gewogICAgICAgIG1vdmllQ2F0ZWdvcnlJZDogdGhpcy5tb3ZpZUNhdGVnb3J5SWQsCiAgICAgICAgb3JkZXJCeUNvbHVtbjogdGhpcy5vcmRlckJ5Q29sdW1uLAogICAgICAgIHBhZ2VTaXplOiB0aGlzLnBhZ2VTaXplLAogICAgICAgIHBhZ2VOdW06IHRoaXMucGFnZU51bSwKICAgICAgICBzdGFydERhdGU6IHRoaXMuc3RhcnREYXRlLAogICAgICAgIGVuZERhdGU6IHRoaXMuZW5kRGF0ZSwKICAgICAgICBpc0FzYzogJ2Rlc2MnCiAgICAgIH0KICAgICAgY29uc3QgeyBkYXRhIDogcmVzIH0gPSBhd2FpdCBheGlvcy5nZXQoJ3N5c01vdmllL2ZpbmQnLCB7cGFyYW1zOiBxdWVyeUluZm99KQogICAgICB0aGlzLm1vdmllTGlzdCA9IHJlcy5kYXRhCiAgICAgIHRoaXMudG90YWwgPSByZXMudG90YWwKICAgICAgdGhpcy5zb3JyeSA9IHRoaXMubW92aWVMaXN0Lmxlbmd0aCA9PT0gMDsKICAgIH0sCiAgICBoYW5kbGVDdXJyZW50Q2hhbmdlKG5ld1BhZ2UpIHsKICAgICAgdGhpcy5wYWdlTnVtID0gbmV3UGFnZQogICAgICB0aGlzLmdldE1vdmllTGlzdCgpCiAgICB9CiAgfQp9Cg=="},{"version":3,"sources":["MovieOngoing.vue"],"names":[],"mappings":";AAwBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"MovieOngoing.vue","sourceRoot":"src/views/movie","sourcesContent":["<template>\n  <div>\n    <div class=\"movie-list\">\n      <movie-item :movieItem=\"item\" v-for=\"item in movieList\" :key=\"item.movieId\"></movie-item>\n    </div>\n\n    <div class=\"no-cinema\" v-if=\"sorry\">\n      <p>抱歉，没有找到相关结果，请尝试用其他条件筛选。</p>\n    </div>\n\n    <div class=\"pageHelper\">\n      <el-pagination\n          @current-change=\"handleCurrentChange\"\n          :current-page=\"pageNum\"\n          :page-size=\"pageSize\"\n          background\n          layout=\"prev, pager, next\"\n          :total=\"total\">\n      </el-pagination>\n    </div>\n  </div>\n</template>\n\n<script>\nimport movieItem from '../../components/movie/movie-item'\nimport moment from 'moment'\nexport default {\n  name: \"MovieOngoing\",\n  components: {\n    movieItem\n  },\n  props: {\n    movieCategoryId: Number,\n    orderByColumn: String\n  },\n  data() {\n    return {\n      total: 0,\n      pageSize: 30,\n      pageNum: 1,\n      startDate: moment().subtract(30, \"days\").format(\"YYYY-MM-DD\"),\n      endDate: moment().format('YYYY-MM-DD'),\n      movieList: [],\n      sorry: false\n    }\n  },\n  computed: {\n    listenChange() {\n      const {movieCategoryId, orderByColumn} = this\n      return {movieCategoryId, orderByColumn}\n    }\n  },\n  created() {\n    this.getMovieList()\n  },\n  watch: {\n    listenChange() {\n      this.getMovieList()\n    }\n  },\n  methods: {\n    async getMovieList(){\n      let queryInfo = {\n        movieCategoryId: this.movieCategoryId,\n        orderByColumn: this.orderByColumn,\n        pageSize: this.pageSize,\n        pageNum: this.pageNum,\n        startDate: this.startDate,\n        endDate: this.endDate,\n        isAsc: 'desc'\n      }\n      const { data : res } = await axios.get('sysMovie/find', {params: queryInfo})\n      this.movieList = res.data\n      this.total = res.total\n      this.sorry = this.movieList.length === 0;\n    },\n    handleCurrentChange(newPage) {\n      this.pageNum = newPage\n      this.getMovieList()\n    }\n  }\n}\n</script>\n\n<style scoped>\n.movie-list{\n  display: flex;\n  flex-wrap: wrap;\n}\n\n.pageHelper{\n  display: flex;\n  justify-content: center;\n  margin: 40px 0px;\n}\n\n.no-cinema{\n  display: flex;\n  justify-content: center;\n  margin-top: 40px;\n  margin-bottom: 40px;\n  font-size: 16px;\n  color: #333;\n}\n</style>\n"]}]}