{"remainingRequest":"D:\\Work\\WorkSpace\\GitWorkSpace\\TenShop\\resource\\CinemaManager\\src\\CinemaManagerUserVue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Work\\WorkSpace\\GitWorkSpace\\TenShop\\resource\\CinemaManager\\src\\CinemaManagerUserVue\\src\\views\\user\\BillInfo.vue?vue&type=style&index=0&id=44a1530f&scoped=true&lang=css&","dependencies":[{"path":"D:\\Work\\WorkSpace\\GitWorkSpace\\TenShop\\resource\\CinemaManager\\src\\CinemaManagerUserVue\\src\\views\\user\\BillInfo.vue","mtime":1698920179227},{"path":"D:\\Work\\WorkSpace\\GitWorkSpace\\TenShop\\resource\\CinemaManager\\src\\CinemaManagerUserVue\\node_modules\\css-loader\\dist\\cjs.js","mtime":1688268006196},{"path":"D:\\Work\\WorkSpace\\GitWorkSpace\\TenShop\\resource\\CinemaManager\\src\\CinemaManagerUserVue\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1688268008402},{"path":"D:\\Work\\WorkSpace\\GitWorkSpace\\TenShop\\resource\\CinemaManager\\src\\CinemaManagerUserVue\\node_modules\\postcss-loader\\src\\index.js","mtime":1688268007038},{"path":"D:\\Work\\WorkSpace\\GitWorkSpace\\TenShop\\resource\\CinemaManager\\src\\CinemaManagerUserVue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1688268005356},{"path":"D:\\Work\\WorkSpace\\GitWorkSpace\\TenShop\\resource\\CinemaManager\\src\\CinemaManagerUserVue\\node_modules\\vue-loader\\lib\\index.js","mtime":1688268007736}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ci5iaWxsLWxpc3QtY29udGFpbmVyIHsKICAgIG1pbi1oZWlnaHQ6IDkwMHB4Owp9CgoucHJvZmlsZS10aXRsZSB7CiAgICBwYWRkaW5nOiAyNnB4IDA7CiAgICBjb2xvcjogI2VjNDQzZjsKICAgIGZvbnQtc2l6ZTogMThweDsKICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjZTFlMWUxOwogICAgbWFyZ2luLWJvdHRvbTogMzBweDsKfQoKLm9yZGVyLWJveCB7CiAgICBib3JkZXI6IDFweCBzb2xpZCAjZTVlNWU1OwogICAgbWFyZ2luOiAwIDQwcHggMzBweCAwOwp9Cgoub3JkZXItYm94IC5vcmRlci1oZWFkZXIgewogICAgYmFja2dyb3VuZC1jb2xvcjogI2Y3ZjdmNzsKICAgIGZvbnQtc2l6ZTogMThweDsKICAgIHBhZGRpbmc6IDE2cHggMjBweDsKfQoKLm9yZGVyLWJveCAub3JkZXItaGVhZGVyIC5vcmRlci1kYXRlIHsKICAgIGNvbG9yOiAjMzMzOwogICAgZGlzcGxheTogaW5saW5lLWJsb2NrOwogICAgbWFyZ2luLXJpZ2h0OiAzMHB4Owp9Cgoub3JkZXItYm94IC5vcmRlci1oZWFkZXIgLm9yZGVyLWlkIHsKICAgIGNvbG9yOiAjOTk5Owp9CgouZGVsLW9yZGVyIHsKICAgIGZsb2F0OiByaWdodDsKfQoKLm9yZGVyLWJveCAub3JkZXItYm9keSB7CiAgICBwYWRkaW5nOiAyMHB4OwogICAgcGFkZGluZy1yaWdodDogMDsKICAgIGRpc3BsYXk6IGZsZXg7Cn0KCi5vcmRlci1ib3ggLm9yZGVyLWJvZHkgLnBvc3RlciB7CiAgICB3aWR0aDogNjZweDsKICAgIGhlaWdodDogOTFweDsKICAgIG1hcmdpbi1yaWdodDogMTFweDsKICAgIGJveC1zaGFkb3c6IDAgMnB4IDRweCByZ2JhKDAsIDAsIDAsIDAuMTIpLCAwIDAgNnB4IHJnYmEoMCwgMCwgMCwgMC4wNCk7Cn0KCi5wb3N0ZXIgaW1nIHsKICAgIHdpZHRoOiAxMDAlOwogICAgaGVpZ2h0OiAxMDAlOwp9Cgoub3JkZXItY29udGVudCB7CiAgICB3aWR0aDogNDklOwp9CgoubW92aWUtbmFtZSB7CiAgICBmb250LXNpemU6IDE2cHg7CiAgICBmb250LXdlaWdodDogNzAwOwogICAgY29sb3I6ICMzMzM7CiAgICBtYXJnaW46IDRweCAwIDdweCAtNnB4Owp9CgouY2luZW1hLW5hbWUsCi5oYWxsLXRpY2tldCB7CiAgICBmb250LXNpemU6IDEycHg7CiAgICBjb2xvcjogIzk5OTsKICAgIG1hcmdpbi1ib3R0b206IDRweDsKfQoKLnNob3ctdGltZSB7CiAgICBmb250LXNpemU6IDEycHg7CiAgICBjb2xvcjogI2YwM2QzNzsKfQoKLm9yZGVyLXByaWNlLAoub3JkZXItc3RhdHVzLAouYWN0aW9ucyB7CiAgICBmb250LXNpemU6IDE0cHg7CiAgICBjb2xvcjogIzMzMzsKICAgIHdpZHRoOiAxNSU7CiAgICBsaW5lLWhlaWdodDogOTVweDsKfQoub3JkZXItZGV0YWlsIHsKICAgIGNvbG9yOiAjMmQ5OGYzOwp9CmEgewogICAgdGV4dC1kZWNvcmF0aW9uOiBub25lOwogICAgY3Vyc29yOiBwb2ludGVyOwogICAgY29sb3I6ICMzMzM7Cn0K"},{"version":3,"sources":["BillInfo.vue"],"names":[],"mappings":";AAiKA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"BillInfo.vue","sourceRoot":"src/views/user","sourcesContent":["<template>\n    <div class=\"bill-list-container\">\n        <div class=\"profile-title\">\n            <i class=\"iconfont icon-r-shield\" style=\"font-size: 28px\"></i>\n            我的订单\n        </div>\n        <div class=\"order-box\" v-for=\"item in billList\" :key=\"item.id\">\n            <div class=\"order-header\">\n                <i\n                    class=\"iconfont icon-r-right\"\n                    style=\"font-size: 26px; margin-right: 10px\"\n                >\n                </i>\n                <span class=\"order-date\">订单时间：{{ item.createTime }}</span>\n                <span class=\"order-id\">订单编号: {{ item.billId }}</span>\n                <span class=\"del-order\" @click=\"deleteBill(item.billId)\">\n                    <i\n                        class=\"iconfont icon-r-delete\"\n                        style=\"font-size: 26px\"\n                    ></i>\n                </span>\n            </div>\n            <div class=\"order-body\">\n                <div class=\"poster\">\n                    <img :src=\"item.sysSession.sysMovie.moviePoster\" />\n                </div>\n                <div class=\"order-content\">\n                    <div class=\"movie-name\">\n                        《{{ item.sysSession.sysMovie.movieName }}》\n                    </div>\n                    <div class=\"cinema-name\">\n                        {{ item.sysSession.sysHall.sysCinema.cinemaName }}\n                    </div>\n                    <div class=\"hall-ticket\">\n                        <span\n                            >放映厅：{{ item.sysSession.sysHall.hallName }}({{\n                                item.sysSession.sysHall.hallCategory\n                            }})</span\n                        >\n                        <span></span>\n                    </div>\n                    <div class=\"show-time\">\n                        播放时间：{{\n                            item.sysSession.sessionDate +\n                            \" \" +\n                            item.sysSession.playTime +\n                            \" - \" +\n                            item.sysSession.endTime\n                        }}\n                    </div>\n                </div>\n                <div class=\"order-price\">\n                    ￥{{\n                        item.sysSession.sessionPrice *\n                        JSON.parse(item.seats).length\n                    }}\n                    ( {{ JSON.parse(item.seats).length }}*{{\n                        item.sysSession.sessionPrice\n                    }}/张 )\n                </div>\n                <div class=\"order-status\">\n                    {{ item.payState ? \"已完成\" : \"未完成\" }}\n                </div>\n                <div class=\"actions\">\n                    <div>\n                        <el-button\n                            @click=\"toBillDetail(item.billId)\"\n                            style=\"font-size: 20px\"\n                        >\n                            详情\n                        </el-button>\n                        <!-- <a  class=\"order-detail\" ></a> -->\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\nimport moment from \"moment\";\nimport billDetail from \"../pay/BillDetail\";\nexport default {\n    name: \"BillInfo\",\n    data() {\n        return {\n            queryInfo: {\n                userId: \"\",\n            },\n            billList: [\n                {\n                    sysSession: {\n                        sysMovie: {\n                            moviePoster: \"\",\n                        },\n                        sysCinema: {},\n                        sysHall: {},\n                    },\n                },\n            ],\n        };\n    },\n    created() {\n        this.getUser();\n        this.getBillList();\n    },\n    methods: {\n        getUser() {\n            this.queryInfo.userId = JSON.parse(\n                window.sessionStorage.getItem(\"loginUser\")\n            ).userId;\n        },\n        async getBillList() {\n            const _this = this;\n            await axios\n                .get(\"sysBill\", { params: _this.queryInfo })\n                .then((resp) => {\n                    _this.billList = resp.data.data;\n                });\n\n            for (let idx in this.billList) {\n                this.billList[idx].sysSession.sessionDate = moment(\n                    this.billList[idx].sysSession.sessionDate\n                ).format(\"YYYY年MM月DD日\");\n                this.billList[idx].sysSession.sysMovie.moviePoster =\n                    this.global.base +\n                    JSON.parse(\n                        this.billList[idx].sysSession.sysMovie.moviePoster\n                    )[0];\n            }\n        },\n        toBillDetail(id) {\n            this.$router.push(\"/billDetail/\" + id);\n        },\n        async deleteBill(id) {\n            const _this = this;\n            const resp = await this.$confirm(\n                \"此操作将永久删除订单信息,是否继续?\",\n                \"提示\",\n                {\n                    confirmButtonText: \"确定\",\n                    cancelButtonText: \"取消\",\n                    type: \"warning\",\n                }\n            ).catch((err) => err);\n            if (resp === \"cancel\") {\n                return _this.$message.info(\"已取消删除\");\n            }\n            await axios.delete(\"sysBill/\" + id).then((resp) => {\n                if (resp.data.code !== 200) {\n                    this.$message.error(\"删除失败！\");\n                }\n            });\n            await this.getBillList();\n            this.$message.success(\"删除成功！\");\n        },\n    },\n};\n</script>\n\n<style scoped>\n.bill-list-container {\n    min-height: 900px;\n}\n\n.profile-title {\n    padding: 26px 0;\n    color: #ec443f;\n    font-size: 18px;\n    border-bottom: 1px solid #e1e1e1;\n    margin-bottom: 30px;\n}\n\n.order-box {\n    border: 1px solid #e5e5e5;\n    margin: 0 40px 30px 0;\n}\n\n.order-box .order-header {\n    background-color: #f7f7f7;\n    font-size: 18px;\n    padding: 16px 20px;\n}\n\n.order-box .order-header .order-date {\n    color: #333;\n    display: inline-block;\n    margin-right: 30px;\n}\n\n.order-box .order-header .order-id {\n    color: #999;\n}\n\n.del-order {\n    float: right;\n}\n\n.order-box .order-body {\n    padding: 20px;\n    padding-right: 0;\n    display: flex;\n}\n\n.order-box .order-body .poster {\n    width: 66px;\n    height: 91px;\n    margin-right: 11px;\n    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.12), 0 0 6px rgba(0, 0, 0, 0.04);\n}\n\n.poster img {\n    width: 100%;\n    height: 100%;\n}\n\n.order-content {\n    width: 49%;\n}\n\n.movie-name {\n    font-size: 16px;\n    font-weight: 700;\n    color: #333;\n    margin: 4px 0 7px -6px;\n}\n\n.cinema-name,\n.hall-ticket {\n    font-size: 12px;\n    color: #999;\n    margin-bottom: 4px;\n}\n\n.show-time {\n    font-size: 12px;\n    color: #f03d37;\n}\n\n.order-price,\n.order-status,\n.actions {\n    font-size: 14px;\n    color: #333;\n    width: 15%;\n    line-height: 95px;\n}\n.order-detail {\n    color: #2d98f3;\n}\na {\n    text-decoration: none;\n    cursor: pointer;\n    color: #333;\n}\n</style>\n"]}]}